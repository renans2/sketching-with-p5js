import"./index-CYgE86nV.js";import{g as a}from"./get-canvas-size-2m1UvVAj.js";const A=t=>{let n,r,h=[],o=[];t.setup=()=>{const i=a();t.createCanvas(i,i),n=t.width/20,r=t.height/20,t.background(0),t.noStroke(),t.textAlign(t.LEFT,t.TOP),t.textFont("Noto Serif JP Regular",20),t.textLeading(20);for(let e=0;e<n;e++){o[e]=[],o[e][0]=E(),h[e]=[];for(let s=0;s<r;s++)h[e][s]=new g(e*20,s*20)}},t.draw=()=>{t.fill(0,0,0,20),t.rect(0,0,t.width,t.height);for(let i=0;i<n;i++){let e=o[i][0];if(e!=null){for(let l of e.getRevealed())h[i][l].draw(70);e.getRevealed().length>0&&h[i][e.getRevealed()[e.getRevealed().length-1]].draw(255),e.update(),e.isOut()?o[i][0]=null:e.hitBottom()&&o[i][1]==null&&(o[i][1]=E())}let s=o[i][1];if(s!=null){for(let l of s.getRevealed())h[i][l].draw(70);s.getRevealed().length>0&&h[i][s.getRevealed()[s.getRevealed().length-1]].draw(255),s.update(),s.isOut()?o[i][1]=null:s.hitBottom()&&o[i][0]==null&&(o[i][0]=E())}}},t.windowResized=()=>{const i=a();t.resizeCanvas(i,i)};function E(){let i=t.floor(t.random(3,13)),e=t.floor(t.random(1,15));return new m(i,e)}class m{length;delay;pos;timer;previousTime;constructor(e,s){this.length=e,this.delay=this.delayFromSpeed(s),this.pos=-this.length,this.timer=0,this.previousTime=0}delayFromSpeed(e){return t.map(e,1,15,200,20)}hitBottom(){return this.pos+this.length>r-1}isOut(){return this.pos>r-1}update(){let e=t.millis();this.timer+=e-this.previousTime,this.previousTime=e,this.timer>this.delay&&(this.timer=0,this.move())}move(){this.pos++}getRevealed(){let e=[];if(this.pos>=0){let s;this.pos+this.length<r?s=this.length:s=r-this.pos;for(let l=0;l<s;l++)e.push(this.pos+l)}else{let s=this.pos+this.length;for(let l=0;l<s;l++)e.push(l)}return e}}class g{pos;symbol;changeDelay;previousTime;timer;constructor(e,s){this.pos=t.createVector(e,s),this.symbol="",this.changeDelay=0,this.previousTime=0,this.timer=0,this.setNewSymbol(),this.setNewChangeDelay()}draw(e){let s=t.millis();this.timer+=s-this.previousTime,this.previousTime=s,this.timer>this.changeDelay&&(this.setNewSymbol(),this.setNewChangeDelay(),this.timer=0),t.fill(e,255,e),t.text(this.symbol,this.pos.x,this.pos.y)}setNewSymbol(){this.symbol=this.getNewSymbol()}getNewSymbol(){const e="アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let s=t.floor(t.random(e.length));return e.charAt(s)}setNewChangeDelay(){this.changeDelay=t.floor(t.random(800,3e3))}}};export{A as sketch};
